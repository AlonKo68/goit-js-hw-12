{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49502034-df263a01178fc9ef1a0cdcc0b';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page) {\n    try {\n        const { data } = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: 15,\n                page,\n            }\n        });\n\n        return { hits: data.hits, totalHits: data.totalHits };\n\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n});\n\nexport function renderImgCard(images) {\n    const markup = images\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) =>\n                `<li class=\"gallery-item\">\n                    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\"/>\n                        <ul class=\"gallery-text-list\">\n                            <li class=\"gallery-text-item\"><h3>Likes</h3><p>${likes}</p></li>\n                            <li class=\"gallery-text-item\"><h3>Views</h3><p>${views}</p></li>\n                            <li class=\"gallery-text-item\"><h3>Comments</h3><p>${comments}</p></li>\n                            <li class=\"gallery-text-item\"><h3>Downloads</h3><p>${downloads}</p></li>\n                        </ul>\n                    </a>\n                </li>`\n        )\n        .join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup)\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImgCard, clearGallery } from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst spinner = document.querySelector('.loader');\nconst btnLoad = document.querySelector('.btn-load');\n\nbtnLoad.style.display = 'none';\n\nlet page;\nlet queryValue = '';\n\nform.addEventListener('submit', async (evt) => {\n    evt.preventDefault();\n    clearGallery();\n    btnLoad.style.display = 'none';\n    spinner.style.display = 'flex';\n    page = 1;\n\n    queryValue = evt.currentTarget.elements.query.value.trim();\n    if (!queryValue) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term!',\n            position: 'topRight'\n        });\n        spinner.style.display = 'none';\n        return;\n    }\n\n    try {\n        const { hits, totalHits } = await fetchImages(queryValue, page);\n\n        if (hits.length === 0) {\n            iziToast.warning({\n                message: 'No images found. Try again!!',\n                position: 'topRight'\n            });\n        } else {\n            renderImgCard(hits);\n            if (totalHits > 15) btnLoad.style.display = 'flex';\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to fetch images. Try again later!',\n            position: 'topRight'\n        });\n    } finally {\n        spinner.style.display = 'none';\n        form.reset();\n    }\n});\n\nbtnLoad.addEventListener('click', async () => {\n    page += 1;\n    try {\n        const { hits, totalHits } = await fetchImages(queryValue, page);\n        renderImgCard(hits);\n        smoothScroll();\n\n        if (page * 15 >= totalHits) {\n            btnLoad.style.display = 'none';\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight'\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to fetch images. Try again later!',\n            position: 'topRight'\n        });\n    }\n});\n\nfunction smoothScroll() {\n    const cardHeight = document.querySelector('.gallery-item')?.getBoundingClientRect().height || 0;\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","data","axios","error","gallery","lightbox","SimpleLightbox","renderImgCard","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","form","spinner","btnLoad","queryValue","evt","iziToast","hits","totalHits","smoothScroll","cardHeight","_a"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAM,CAC3C,GAAI,CACA,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,IAAIL,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACH,CACb,CAAS,EAED,MAAO,CAAE,KAAMC,EAAK,KAAM,UAAWA,EAAK,UAE7C,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACT,CACL,CCtBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,KAClB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EACV,IACG,CAAC,CACG,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACH,IACG;AAAA,oDACoCL,CAAa;AAAA,0DACPD,CAAY,UAAUE,CAAI;AAAA;AAAA,6EAEPC,CAAK;AAAA,6EACLC,CAAK;AAAA,gFACFC,CAAQ;AAAA,iFACPC,CAAS;AAAA;AAAA;AAAA,sBAIjF,EACA,KAAK,EAAE,EAEZZ,EAAQ,mBAAmB,YAAaK,CAAM,EAC9CJ,EAAS,QAAO,CACpB,CAEO,SAASY,GAAe,CAC3Bb,EAAQ,UAAY,EACxB,CCpCA,MAAMc,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,SAAS,EAC1CC,EAAU,SAAS,cAAc,WAAW,EAElDA,EAAQ,MAAM,QAAU,OAExB,IAAIpB,EACAqB,EAAa,GAEjBH,EAAK,iBAAiB,SAAU,MAAOI,GAAQ,CAQ3C,GAPAA,EAAI,eAAc,EAClBL,IACAG,EAAQ,MAAM,QAAU,OACxBD,EAAQ,MAAM,QAAU,OACxBnB,EAAO,EAEPqB,EAAaC,EAAI,cAAc,SAAS,MAAM,MAAM,OAChD,CAACD,EAAY,CACbE,EAAS,MAAM,CACX,MAAO,QACP,QAAS,8BACT,SAAU,UACtB,CAAS,EACDJ,EAAQ,MAAM,QAAU,OACxB,MACH,CAED,GAAI,CACA,KAAM,CAAE,KAAAK,EAAM,UAAAC,CAAW,EAAG,MAAM3B,EAAYuB,EAAYrB,CAAI,EAE1DwB,EAAK,SAAW,EAChBD,EAAS,QAAQ,CACb,QAAS,+BACT,SAAU,UAC1B,CAAa,GAEDhB,EAAciB,CAAI,EACdC,EAAY,KAAIL,EAAQ,MAAM,QAAU,QAEnD,MAAe,CACZG,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2CACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNJ,EAAQ,MAAM,QAAU,OACxBD,EAAK,MAAK,CACb,CACL,CAAC,EAEDE,EAAQ,iBAAiB,QAAS,SAAY,CAC1CpB,GAAQ,EACR,GAAI,CACA,KAAM,CAAE,KAAAwB,EAAM,UAAAC,CAAW,EAAG,MAAM3B,EAAYuB,EAAYrB,CAAI,EAC9DO,EAAciB,CAAI,EAClBE,IAEI1B,EAAO,IAAMyB,IACbL,EAAQ,MAAM,QAAU,OACxBG,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,UAC1B,CAAa,EAER,MAAe,CACZA,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2CACT,SAAU,UACtB,CAAS,CACJ,CACL,CAAC,EAED,SAASG,GAAe,OACpB,MAAMC,IAAaC,EAAA,SAAS,cAAc,eAAe,IAAtC,YAAAA,EAAyC,wBAAwB,SAAU,EAC9F,OAAO,SAAS,CACZ,IAAKD,EAAa,EAClB,SAAU,QAClB,CAAK,CACL"}